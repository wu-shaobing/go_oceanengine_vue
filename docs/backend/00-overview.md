# OceanEngine 后端开发总览

## 项目概述

本项目是巨量引擎（Ocean Engine）Marketing API 的管理平台后端服务，提供广告主管理、广告投放、数据报告等功能的 RESTful API。

## 技术选型

### 核心框架
| 技术 | 版本 | 说明 |
|------|------|------|
| Go | 1.21+ | 主开发语言 |
| Gin | v1.9.x | Web 框架 |
| GORM | v1.25.x | ORM 框架 |
| MySQL | 8.0+ | 主数据库 |
| Redis | 7.0+ | 缓存、会话、队列 |

### 辅助组件
| 技术 | 说明 |
|------|------|
| JWT | 用户认证 |
| Casbin | 权限控制（RBAC） |
| Swagger | API 文档生成 |
| Zap | 日志框架 |
| Viper | 配置管理 |
| Wire | 依赖注入 |

## 架构设计原则

### 分层架构
```
┌─────────────────────────────────────────────────────────────┐
│                      API Gateway / Nginx                     │
├─────────────────────────────────────────────────────────────┤
│                       Router Layer                           │
│                    (路由注册、中间件)                          │
├─────────────────────────────────────────────────────────────┤
│                       API Layer                              │
│              (参数校验、请求处理、响应封装)                      │
├─────────────────────────────────────────────────────────────┤
│                     Service Layer                            │
│                    (业务逻辑处理)                              │
├─────────────────────────────────────────────────────────────┤
│                    Repository Layer                          │
│                    (数据访问抽象)                              │
├─────────────────────────────────────────────────────────────┤
│                      Model Layer                             │
│                   (数据模型定义)                               │
├─────────────────────────────────────────────────────────────┤
│          Database (MySQL)     │     Cache (Redis)            │
└─────────────────────────────────────────────────────────────┘
```

### 设计原则
1. **单一职责**：每层只负责特定的功能
2. **依赖倒置**：上层依赖下层的抽象接口
3. **接口隔离**：小而专的接口定义
4. **开闭原则**：对扩展开放，对修改关闭

## 核心模块

### 1. 系统管理模块
- 用户管理（登录、注册、信息维护）
- 角色管理（RBAC 权限模型）
- 菜单管理（动态菜单配置）
- 字典管理（系统常量配置）
- 操作日志（审计追踪）

### 2. 广告主管理模块
- 广告主账户（CRUD、授权管理）
- 账户余额（查询、充值记录）
- 资质管理（资质上传、审核状态）

### 3. 广告投放模块
- 广告系列（Campaign）管理
- 广告组（Ad Group）管理
- 广告创意（Creative）管理
- 素材库管理

### 4. 定向管理模块
- 地域定向
- 人群定向
- 兴趣定向
- 行为定向
- 自定义人群包

### 5. 数据报告模块
- 实时数据报告
- 历史数据报告
- 多维度数据分析
- 数据导出

### 6. SDK 集成模块
- Ocean Engine API 封装
- Token 管理
- 请求限流
- 错误重试

## 开发规范

### 代码规范
- 遵循 Go 官方代码规范
- 使用 golangci-lint 进行代码检查
- 函数/方法必须有注释说明
- 错误必须被正确处理

### Git 规范
- 分支命名：feature/xxx, bugfix/xxx, hotfix/xxx
- 提交信息：type(scope): description
- 必须通过 CI 检查才能合并

### API 规范
- RESTful 风格
- 统一响应格式
- 版本管理（/api/v1/）
- Swagger 文档

## 文档目录

| 文档 | 说明 |
|------|------|
| 01-directory-structure.md | 项目目录结构 |
| 02-database-design.md | 数据库设计 |
| 03-api-design.md | API 接口设计 |
| 04-auth-design.md | 认证授权设计 |
| 05-sdk-integration.md | SDK 集成方案 |
| 06-middleware-design.md | 中间件设计 |
| 07-error-handling.md | 错误处理方案 |
| 08-cache-design.md | 缓存设计 |
| 09-logging-design.md | 日志设计 |
| 10-deployment.md | 部署方案 |

## 参考项目

- [go-admin](https://github.com/go-admin-team/go-admin) - 架构设计参考
- [ocean-engine-sdk](../sdk) - 巨量引擎 Go SDK
