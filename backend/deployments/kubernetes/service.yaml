apiVersion: v1
kind: Service
metadata:
  name: oceanengine-api
  namespace: oceanengine
  labels:
    app: oceanengine-api
spec:
  type: ClusterIP
  ports:
    - port: 8080
      targetPort: 8080
      protocol: TCP
      name: http
  selector:
    app: oceanengine-api
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: oceanengine-config
  namespace: oceanengine
data:
  database_host: "mysql-service"
  database_port: "3306"
  database_name: "oceanengine"
  redis_addr: "redis-service:6379"
---
apiVersion: v1
kind: Secret
metadata:
  name: oceanengine-secret
  namespace: oceanengine
type: Opaque
stringData:
  database_username: "root"
  database_password: "your-secure-password"
  jwt_secret: "your-jwt-secret-key"
  ocean_app_id: "your-ocean-app-id"
  ocean_secret: "your-ocean-secret"
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: oceanengine-ingress
  namespace: oceanengine
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
spec:
  rules:
    - host: api.oceanengine.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: oceanengine-api
                port:
                  number: 8080
